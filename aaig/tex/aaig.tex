% -*- ess-noweb-default-code-mode: gap-mode; -*-% ===> this file was generated automatically by noweave --- better not edit it
\documentclass[titlepage,sfsidenotes,nols]{tufte-book}

\usepackage{fontspec}
\setmonofont{Iosevka}

\usepackage{noweb}

\usepackage{color}
% https://commons.wikimedia.org/wiki/File:Erlang_logo.svg
\definecolor{ErlangRed}{HTML}{A90533}

\hypersetup{
  bookmarks=true,
  pdffitwindow=true,
  pdfstartview={FitH},
  pdftitle={Abstract Algebra in GAP: Exercises},
  pdfauthor={Eric Bailey <eric@ericb.me>},
  pdfsubject={Abstract Algebra in GAP},
  pdfkeywords={abstract algebra, GAP, literate programming, noweb},
  colorlinks=true,
  linkcolor=ErlangRed,
  urlcolor=ErlangRed
}

\usepackage{amsmath}
\usepackage{amssymb}
\usepackage{mathtools}
\mathtoolsset{centercolon}

\usepackage[outputdir=tex]{minted}

% NOTE: Use Tufte instead of noweb page style.
% \pagestyle{noweb}
% NOTE: Use shift option for wide code.
% \noweboptions{smallcode,shortxref,webnumbering,english}
\noweboptions{smallcode,shortxref}


\title{Abstract Algebra in GAP}

\author{Eric Bailey}

% \date{October 1, 2017}

\newcommand{\stylehook}{\marginpar{\raggedright\sl Style hook}}

\newmintinline[gap]{gap}{}

\begin{document}
\maketitle
\nwfilename{aaig.nw}\nwbegindocs{1}\nwdocspar

\tableofcontents
\newpage

\chapter{Basic System Interaction}

\section{Exercise 1}

\begin{enumerate}[a]

\item {\Tt{}\nwlinkedidentq{IsPerfectInt}{NWVU3sy-1Ey6ln-1}\nwendquote} is a function that takes a positive integer \gap{n} and
returns \gap{true} if \gap{n} is perfect and \gap{false} otherwise.

We could define a function to compute the aliquot sum of a positive integer $n$:
\marginnote[\baselineskip]{%
  \[
    s(n) \equiv \sigma(n) - n
  \]
}
\nwenddocs{}\nwbegincode{2}\sublabel{NWVU3sy-xApnh-1}\nwmargintag{{\nwtagstyle{}\subpageref{NWVU3sy-xApnh-1}}}\moddef{Compute the aliquot sum of a positive integer~{\nwtagstyle{}\subpageref{NWVU3sy-xApnh-1}}}\endmoddef\nwstartdeflinemarkup\nwenddeflinemarkup
\nwindexdefn{\nwixident{AliquotSum}}{AliquotSum}{NWVU3sy-xApnh-1}\nwlinkedidentc{AliquotSum}{NWVU3sy-xApnh-1} := n -> Sum(DivisorsInt(n)) - n;
\nwnotused{Compute the aliquot sum of a positive integer}\nwidentdefs{\\{{\nwixident{AliquotSum}}{AliquotSum}}}\nwendcode{}\nwbegindocs{3}\nwdocspar

Then, using that definition, we could write a function to determine whether a
positive integer $n$ is perfect:
\nwenddocs{}\nwbegincode{4}\sublabel{NWVU3sy-3gU79I-1}\nwmargintag{{\nwtagstyle{}\subpageref{NWVU3sy-3gU79I-1}}}\moddef{Determine whether a positive integer is perfect~{\nwtagstyle{}\subpageref{NWVU3sy-3gU79I-1}}}\endmoddef\nwstartdeflinemarkup\nwenddeflinemarkup
\nwlinkedidentc{IsPerfectInt}{NWVU3sy-1Ey6ln-1} := n -> n = \nwlinkedidentc{AliquotSum}{NWVU3sy-xApnh-1}(n);
\nwnotused{Determine whether a positive integer is perfect}\nwidentuses{\\{{\nwixident{AliquotSum}}{AliquotSum}}\\{{\nwixident{IsPerfectInt}}{IsPerfectInt}}}\nwindexuse{\nwixident{AliquotSum}}{AliquotSum}{NWVU3sy-3gU79I-1}\nwindexuse{\nwixident{IsPerfectInt}}{IsPerfectInt}{NWVU3sy-3gU79I-1}\nwendcode{}\nwbegindocs{5}\nwdocspar

Conveniently, GAP ships with \gap{Sigma}, which we can use instead.
\marginnote[-1\baselineskip]{%
  \begin{align*}
    \sigma(n) &= \sum_{d|n} d \\
    {\Tt{}\nwlinkedidentq{IsPerfectInt}{NWVU3sy-1Ey6ln-1}\nwendquote}(n) := \sigma(n) &= 2n
  \end{align*}
}
\nwenddocs{}\nwbegincode{6}\sublabel{NWVU3sy-1Ey6ln-1}\nwmargintag{{\nwtagstyle{}\subpageref{NWVU3sy-1Ey6ln-1}}}\moddef{Determine whether a positive integer is perfect, using Sigma~{\nwtagstyle{}\subpageref{NWVU3sy-1Ey6ln-1}}}\endmoddef\nwstartdeflinemarkup\nwusesondefline{\\{NWVU3sy-jcA4G-1}}\nwenddeflinemarkup
\nwindexdefn{\nwixident{IsPerfectInt}}{IsPerfectInt}{NWVU3sy-1Ey6ln-1}\nwlinkedidentc{IsPerfectInt}{NWVU3sy-1Ey6ln-1} := n -> Sigma(n) = 2*n;
\nwused{\\{NWVU3sy-jcA4G-1}}\nwidentdefs{\\{{\nwixident{IsPerfectInt}}{IsPerfectInt}}}\nwendcode{}\nwbegindocs{7}\nwdocspar

\item To find all perfect numbers less than $1000$, run the following:
\marginnote[2\baselineskip]{%
  \[
    \left\{n \in \mathbb{Z}^+\ |\ 1 \leq n < 1000,\ {\Tt{}\nwlinkedidentq{IsPerfectInt}{NWVU3sy-1Ey6ln-1}\nwendquote}(n)\right\}
  \]
}

\nwenddocs{}\nwbegincode{8}\sublabel{NWVU3sy-h8dy6-1}\nwmargintag{{\nwtagstyle{}\subpageref{NWVU3sy-h8dy6-1}}}\moddef{Find all perfect numbers less than 1000~{\nwtagstyle{}\subpageref{NWVU3sy-h8dy6-1}}}\endmoddef\nwstartdeflinemarkup\nwusesondefline{\\{NWVU3sy-1LxnzQ-1}}\nwenddeflinemarkup
Filtered([1..999], \nwlinkedidentc{IsPerfectInt}{NWVU3sy-1Ey6ln-1});
\nwused{\\{NWVU3sy-1LxnzQ-1}}\nwidentuses{\\{{\nwixident{IsPerfectInt}}{IsPerfectInt}}}\nwindexuse{\nwixident{IsPerfectInt}}{IsPerfectInt}{NWVU3sy-h8dy6-1}\nwendcode{}\nwbegindocs{9}\nwdocspar

... which results in:
\nwenddocs{}\nwbegincode{10}\sublabel{NWVU3sy-1gKlN7-1}\nwmargintag{{\nwtagstyle{}\subpageref{NWVU3sy-1gKlN7-1}}}\moddef{All perfect numbers less than 1000~{\nwtagstyle{}\subpageref{NWVU3sy-1gKlN7-1}}}\endmoddef\nwstartdeflinemarkup\nwusesondefline{\\{NWVU3sy-1LxnzQ-1}}\nwenddeflinemarkup
[ 6, 28, 496 ]
\nwused{\\{NWVU3sy-1LxnzQ-1}}\nwendcode{}\nwbegindocs{11}\nwdocspar

\item Not all numbers of the form $2^n(2^{n+1} - 1)$, for some positive integer
  $n$, are perfect.

\nwenddocs{}\nwbegincode{12}\sublabel{NWVU3sy-2uZKeV-1}\nwmargintag{{\nwtagstyle{}\subpageref{NWVU3sy-2uZKeV-1}}}\moddef{Not all perfect~{\nwtagstyle{}\subpageref{NWVU3sy-2uZKeV-1}}}\endmoddef\nwstartdeflinemarkup\nwenddeflinemarkup
gap> ForAll( PositiveIntegers,
>            n -> \nwlinkedidentc{IsPerfectInt}{NWVU3sy-1Ey6ln-1}(2^n * (2^(n+1) - 1)) );
false
\nwnotused{Not all perfect}\nwidentuses{\\{{\nwixident{IsPerfectInt}}{IsPerfectInt}}}\nwindexuse{\nwixident{IsPerfectInt}}{IsPerfectInt}{NWVU3sy-2uZKeV-1}\nwendcode{}\nwbegindocs{13}\nwdocspar

\item In Euclid's formation rule (IX.36), he proved $\frac{q(q+1)}{2}$ is an
  even perfect number where $q$ is a prime of the form $2^p - 1$ for prime $p$,
  a.k.a. a Mersenne prime.

\nwenddocs{}\nwbegincode{14}\sublabel{NWVU3sy-hWGw1-1}\nwmargintag{{\nwtagstyle{}\subpageref{NWVU3sy-hWGw1-1}}}\moddef{Euclid's IX.36~{\nwtagstyle{}\subpageref{NWVU3sy-hWGw1-1}}}\endmoddef\nwstartdeflinemarkup\nwenddeflinemarkup
gap> MersennePrimes := Filtered( List( Primes\{[1..50]\},
                                       p -> 2^p - 1 ),
                                 IsPrime );
[ 3, 7, 31, 127, 8191, 131071, 524287, 2147483647,
  2305843009213693951, 618970019642690137449562111,
  162259276829213363391578010288127,
  170141183460469231731687303715884105727 ]
gap> ForAll( MersennePrimes, q -> \nwlinkedidentc{IsPerfectInt}{NWVU3sy-1Ey6ln-1}(q * (q + 1) / 2) );
true
\nwnotused{Euclid's IX.36}\nwidentuses{\\{{\nwixident{IsPerfectInt}}{IsPerfectInt}}}\nwindexuse{\nwixident{IsPerfectInt}}{IsPerfectInt}{NWVU3sy-hWGw1-1}\nwendcode{}\nwbegindocs{15}\nwdocspar

\item TODO: Prove it.

\end{enumerate}


\subsection{Code}
\nwenddocs{}\nwbegincode{16}\sublabel{NWVU3sy-jcA4G-1}\nwmargintag{{\nwtagstyle{}\subpageref{NWVU3sy-jcA4G-1}}}\moddef{src/PerfectNumbers.g~{\nwtagstyle{}\subpageref{NWVU3sy-jcA4G-1}}}\endmoddef\nwstartdeflinemarkup\nwenddeflinemarkup
\LA{}Determine whether a positive integer is perfect, using Sigma~{\nwtagstyle{}\subpageref{NWVU3sy-1Ey6ln-1}}\RA{}
\nwnotused{src/PerfectNumbers.g}\nwendcode{}\nwbegindocs{17}\nwdocspar


\subsection{Tests}

To run the tests, make sure the code is loaded
(\gap{Read("./src/PerfectNumbers.g");}), then run \gap{Test("src/PerfectNumbers.tst");}.

\nwenddocs{}\nwbegincode{18}\sublabel{NWVU3sy-1LxnzQ-1}\nwmargintag{{\nwtagstyle{}\subpageref{NWVU3sy-1LxnzQ-1}}}\moddef{src/PerfectNumbers.tst~{\nwtagstyle{}\subpageref{NWVU3sy-1LxnzQ-1}}}\endmoddef\nwstartdeflinemarkup\nwenddeflinemarkup
# Perfect Number Tests

# Perfect numbers less than 1000
gap> \LA{}Find all perfect numbers less than 1000~{\nwtagstyle{}\subpageref{NWVU3sy-h8dy6-1}}\RA{}
\LA{}All perfect numbers less than 1000~{\nwtagstyle{}\subpageref{NWVU3sy-1gKlN7-1}}\RA{}
\nwnotused{src/PerfectNumbers.tst}\nwendcode{}

\nwixlogsorted{c}{{All perfect numbers less than 1000}{NWVU3sy-1gKlN7-1}{\nwixd{NWVU3sy-1gKlN7-1}\nwixu{NWVU3sy-1LxnzQ-1}}}%
\nwixlogsorted{c}{{Compute the aliquot sum of a positive integer}{NWVU3sy-xApnh-1}{\nwixd{NWVU3sy-xApnh-1}}}%
\nwixlogsorted{c}{{Determine whether a positive integer is perfect}{NWVU3sy-3gU79I-1}{\nwixd{NWVU3sy-3gU79I-1}}}%
\nwixlogsorted{c}{{Determine whether a positive integer is perfect, using Sigma}{NWVU3sy-1Ey6ln-1}{\nwixd{NWVU3sy-1Ey6ln-1}\nwixu{NWVU3sy-jcA4G-1}}}%
\nwixlogsorted{c}{{Euclid's IX.36}{NWVU3sy-hWGw1-1}{\nwixd{NWVU3sy-hWGw1-1}}}%
\nwixlogsorted{c}{{Find all perfect numbers less than 1000}{NWVU3sy-h8dy6-1}{\nwixd{NWVU3sy-h8dy6-1}\nwixu{NWVU3sy-1LxnzQ-1}}}%
\nwixlogsorted{c}{{Not all perfect}{NWVU3sy-2uZKeV-1}{\nwixd{NWVU3sy-2uZKeV-1}}}%
\nwixlogsorted{c}{{src/PerfectNumbers.g}{NWVU3sy-jcA4G-1}{\nwixd{NWVU3sy-jcA4G-1}}}%
\nwixlogsorted{c}{{src/PerfectNumbers.tst}{NWVU3sy-1LxnzQ-1}{\nwixd{NWVU3sy-1LxnzQ-1}}}%
\nwixlogsorted{i}{{\nwixident{AliquotSum}}{AliquotSum}}%
\nwixlogsorted{i}{{\nwixident{IsPerfectInt}}{IsPerfectInt}}%
\nwbegindocs{19}\nwdocspar

\chapter{Chunks}
\nowebchunks

\chapter{Index}
\nowebindex

\bibliography{aaig}
\bibliographystyle{plainnat}

\end{document}
\nwenddocs{}
